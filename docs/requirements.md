# 要件定義書 (Requirements)

## 1. 機能要件

### 1.1 表示等の機能
*   **ダッシュボード表示**: 以下の資産クラスの代表的な指数をグリッド状（Bento Grid）に一覧表示する。
*   **ヒートマップ視覚化**: 騰落率を色の濃淡（鮮やかな緑〜深い赤）で表現し、市場全体の「体温」を一目で把握可能にする (FinvizライクなUI)。
*   **指標データ**: 各指数について「現在値」「前日比(%)」「トレンド」を表示する。

### 1.2 対象資産クラス・指数
以下のカテゴリ、計15〜20程度の指数を監視対象とする（拡張性を持たせる）。

1.  **株式 (Global Equities)**
    *   **米国大型**: 🇺🇸 S&P 500
    *   **米国ハイテク**: 🇺🇸 NASDAQ 100
    *   **米国中小型 (Russell)**:
        *   🇺🇸 Russell 1000 (大型株 - S&P500と類似)
        *   🇺🇸 Russell 2000 (小型株 - 景気敏感)
        *   🇺🇸 Russell 3000 (全米広範囲)
        *   (補足: バリュー/グロースの区分も将来的に検討)
    *   **日本市場**:
        *   🇯🇵 日経225 (日本を代表する225銘柄)
        *   🇯🇵 TOPIX (市場全体)
        *   🇯🇵 JPX日経400 (ROE重視・稼ぐ力のある企業)
        *   🇯🇵 東証グロース市場250指数 (旧マザーズ・新興株)
    *   **欧州**: 🇪🇺 STOXX 600, 🇬🇧 FTSE 100, 🇩🇪 DAX
    *   **新興国**: 🌏 MSCI Emerging Markets
    *   **全世界**: 🌏 MSCI ACWI (All Country World Index)
2.  **債券 (Fixed Income)** - 金利動向
    *   🇺🇸 米国10年国債利回り / 2年国債利回り
    *   �� 日本10年国債利回り (長期金利)
    *   🇯🇵 日本2年国債利回り (短期金利・政策金利の影響)
3.  **為替 (Currencies)**
    *   🇯🇵/🇺🇸 USD/JPY (ドル円)
    *   🇪🇺/🇯🇵 EUR/JPY (ユーロ円)
    *   🇪🇺/🇺🇸 EUR/USD (ユーロドル)
4.  **不動産 (Real Estate)**
    *   🇯🇵 東証REIT指数
    *   🇺🇸 米国REIT指数 (Dow Jones US Select REIT)
5.  **コモディティ (Commodities)**
    *   🥇 金 (Gold / XAUUSD)
    *   🛢️ 原油 (WTI)
    *   🌾 総合商品指数 (CRB指数など)
6.  **その他 (Others)**
    *   😰 VIX指数 (米国恐怖指数)
    *   😰 日経VI (日本版恐怖指数)
    *   📈 日本のインフレ率 (CPI) ※月次データだが重要
    *   ₿ ビットコイン (BTC/USD)

### 1.3 分析機能 (Advanced)
*   **基準日比較 (Time Machine)**:
    *   ユーザーが指定した日付（例：コロナショック底値、利上げ開始日）を「100」として、その後のパフォーマンスを比較表示する機能。
*   **相関マトリックス (Correlation)**:
    *   各資産クラス間の相関係数をヒートマップで表示し、「分散効果が効いているか」を確認できる機能 (Portfolio Visualizerの強み)。

## 2. 非機能要件
*   **パフォーマンス**: 初期表示が高速であること。
## 3. データソース戦略 (Data Strategy)
> [!IMPORTANT]
> 無料APIで全世界の指数・債券・コモディティを網羅するのは難易度が高いです。以下の戦略で進めます。

*   **Primary Source**: **Yahoo Finance (Unofficial)**
    *   理由: 無料で最も広範なデータ（米国株、日本株、国債利回り、先物）にアクセス可能。
    *   技術: Rustクレート `yahoo_finance_api` または同等のスクレイピングライブラリを使用。
    *   リスク: 非公式APIのため、将来的に仕様変更で使えなくなる可能性がある（その場合はスクレイピング等の修正が必要）。
*   **Secondary Source (Backup)**:
    *   **Alpha Vantage (Free Tier)**: 米国株・為替のバックアップ（1日25回制限）。
    *   **Stooq**: 日本の指数やヒストリカルデータに強い（ポーランドのサイトだがデータ品質が高い）。
*   **Update Frequency**:
    *   リアルタイム性は追求せず、**15分〜1時間ごとの更新**（CORS/キャッシュ対策でWorker側で制御）とする。
    *   日中の「トレンド」を見るには十分。
